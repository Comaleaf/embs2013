#include "vlab.hch"
#include "dac.hch"

void dac_driver() {
	unsigned 12 sample;
	unsigned 13 i;
	
	while (1) {
        par {
            dac_write ? sample;
            i = dac_sample_rate;
        }
		par {
			dac_write_to_output(0xF, sample);
			while (i) i--; // assignment takes 1 cycle
		}
	}
}